---
title: 소수를 분모로 갖는 분수의 반복되는 특별한 성질
date: 2023-12-23
tags:
  - 소수
  - 정수
  - 순환
  - 나머지
  - 주기
  - 반복
  - 표현
  - 마디
  - 순환마디
---
유리수 $\frac{n}{d}$(정수 $n$과 $d$의 비율)은 소수로 변환될 수 있습니다. 만약 분모 $d$의 모든 소인수가 $10$을 나눌 경우, $\frac{n}{d}$는 유한하며, 그 외의 경우 $\frac{n}{d}$는 반복되는 소수를 생성합니다. 이때, 반복되는 숫자를 순환 주기또는 순환 마디라고 하며, 가장 짧은 반복 숫자 수를 주기의 길이라고 합니다.

유리수가 주기적인 무한 소수임을 확인하는 가장 쉬운 방법은 긴 나눗셈 과정을 직접 조사하는 것입니다. $n$을 $d$로 나눌 때 가능한 나머지는 $1, 2, \cdots, d-1$입니다. 따라서 긴 나눗셈에서 최대 $d-1$단계 후에 이러한 나머지 중 하나가 다시 나타납니다. 이런 일이 발생하면 긴 나눗셈 과정은 이전 단계를 반복하여 동일한 몫과 나머지의 순서를 생성합니다. 긴 나눗셈에서 가능한 나머지의 수는 한정되어 있기 때문에, 어느 시점에서는 이전에 나왔던 나머지가 다시 나타나게 됩니다. 이는 나눗셈 과정이 그 지점에서 반복되기 시작한다는 것을 의미하며, 결과적으로 소수 표현이 주기적으로 되풀이되며 순환주기는 반드시 $d-1$의 약수가 되죠.

쉽게 분모가 소수일 때를 예를 들면 다음과 같이 구할 수 있습니다. 이때 순환주기의 길이를 보면 분모에서 $1$을 뺀 $p-1$의 약수인 것을 볼 수 있습니다.

$$
\begin{gather*}

\frac{1}{7} = 0.\,142857\,142857 \cdots = 0.\overline{142857}\\

\frac{1}{13} = 0.\overline{076923}\\

\frac{1}{17} = 0.\overline{0588235294117647}\\

\frac{1}{19} = 0.\overline{052631578947368421}

\end{gather*}
$$

소수를 분모로 갖는 분수에서 흥미로운 점은 이것 뿐만이 아닙니다. 가장 짧은 주기를 반으로 나누고 두 부분을 각각 더하면 반드시 $9$가 반복됩니다.

$$
\begin{align*}
\frac{1}{7} \quad &; \quad 142+857=999\\
\frac{1}{13} \quad &; \quad 076+923=999\\
\frac{1}{17} \quad &; \quad 05882352+94117647=99999999\\
\frac{1}{19} \quad &; \quad 052631578+947368421=999999999
\end{align*}
$$

$$
\begin{gather*}
&076 \\
+&923 \\
\hline
&999
\\
\\
&05882352 \\
+ &94117647 \\
\hline
&99999999
\\
\\
&052631578 \\
+&947368421 \\
\hline
&999999999
\end{gather*}
$$
이는 우연일까요? 절대 아닙니다. 이는 분모가 소수인 분수 중 어떤 특정한 조건을 만족하면 반드시 성립하는 특별한 성질이죠. 반복되는 소수 확장을 가지는 유리수 $\frac{n}{p}$에서 $p$가 $2$나 $5$가 아닌 소수이고 가장 짧은 주기가 짝수 개의 숫자를 포함할 경우, 해당 주기의 첫 번째와 두 번째 절반을 더하면 반드시 $9$로만 구성됩니다. 왜 이러한 성질이 성립하는지 차근차근 보도록 하겠습니다.

## 등비급수를 이용한 순환소수표현

모든 계수가 $1$인 $n$차 다항식에 $(1-x)$를 곱하면 인수분해를 이용해 식을 간단하게 정리할 수 있습니다.

$$
(1 + x + x^2 + \cdots + x^n)(1 - x) = 1 - x^{n+1}
$$

이를 이용해 초항이 $a$이고 공비가 $b$인 등비수열의 합은 $b$가 $1$이 아닐 때 다음과 같이 나타낼 수 있습니다.

$$
a + ab + ab^2 + \cdots + ab^n = \frac{a(1 - b^{n+1})}{1 - b}
$$

$0 < b < 1$이고 $n$이 무한대로 발산하면, $b^{n+1}$은 $0$에 가까워집니다. 따라서 다음과 같은 등비급수 합 공식을 얻을 수 있습니다. 우리는 이 결과를 반복되는 소수점에 적용할 수 있습니다.

$$
a + ab + ab^2 + \cdots = \frac{a}{1 - b}
$$

예를 들어 $\frac{1}{7}$의 반복되는 소수표현을 등비수열의 합으로 나타내면 다음과 같습니다.

$$
\frac{1}{7} = \frac{142857}{10^7} + \frac{142857}{10^{14}} + \frac{142857}{10^{21}} + \cdots
$$

이를 앞 서본 등비급수의 합 공식을 이용해 나타내면 다음과 같습니다.

$$
\frac{142857}{10^7} \left( 1 + \frac{1}{10^7} + \frac{1}{10^{14}} + \cdots \right) = \frac{142857}{10^7 \left(1 - \frac{1}{10^7}\right)} = \frac{142857}{10^7 - 1}
$$

이 표현을 이용해 조금 더 일반적인 분수들을 나타내보겠습니다. $\frac{n}{d}$의 정수부분이 $R$이고, $s$자리 이후에 순환마디 $P$가 $u$의 길이를 갖는 유리수라 하면 이 수를 다음과 같이 표현할 수 있습니다.

$$
\begin{align*}
\frac{n}{d} &= R + \frac{Q}{10^s} + \frac{P}{10^{s+u}} + \frac{P}{10^{s+2u}} + \frac{P}{10^{s+3u}} + \cdots \\
&= R + \frac{Q}{10^s} + \frac{P}{10^{s}}\left( \frac{1}{10^{u}} + \frac{1}{10^{2u}} + \frac{1}{10^{3u}} \right)\\
&= R + \frac{Q}{10^s} + \frac{P}{10^{s}} \cdot\frac{1}{10^{u}-1}
\end{align*}
$$

만약 $n<d$라면, $R=0$이므로 이 표현을 더 간단하게 할 수 있고,

$$
\frac{n}{d} = \frac{Q}{10^s} + \frac{P}{10^{s+u}} + \frac{P}{10^{s+2u}} + \frac{P}{10^{s+3u}} + \cdots
$$

순환마디가 바로 시작한다면 $s=0$이므로 결과적으로 식을 더 간단하게 나타낼 수 있습니다.

$$
\frac{n}{d} = \frac{P}{10^{u}} + \frac{P}{10^{2u}} + \frac{P}{10^{3u}} + \cdots = \frac{P}{10^{u}-1}
$$

## 페르마의 소정리
소수 $p$가 $10$을 나누지 않을 때 $\frac{n}{p}$은 주기적이며, 오직 진분수만 고려하면 충분합니다. 왜냐하면 만약 $n > p$라면, 나머지 정리에 의해 $n = pq + r$ ($r < p$)로 나타낼 수 있기 때문입니다. 그러면

$$
\frac{n}{p} = q + \frac{r}{p} \quad (r < p)
$$

정수 $q$는 소수점 앞에 오고, $\frac{r}{p}$는 소수 부분이 되므로 결과적으로 우리가 관심있는 소수 부분만 따로 볼 수 있게 됩니다. 이제 소수 부분을 자세히 보기 위해 $p$로 나누는 과정을 분석해보겠습니다.

$p$로 어떤 수를 나눌 때 다음과 같은 $0$이 아닌 나머지들이 생기게 됩니다.

$$
1, 2, 3, \cdots, p-1
$$

그리고 모든 수들은 이와 같이 $p$로 나누었을때, 나머지가 같은 수끼리 분류할 수 있습니다.

$$ 
\begin{array}{|c|c|}
\hline
\text{나머지} & \text{수} \\
\hline
0 & 0, p, 2p, \cdots \\
\hline
1 & 1, p+1, 2p+1, \cdots \\
\hline
2 & 2, p+2, 2p+2, \cdots \\
\hline
3 & 3, p+3, 2p+3, \cdots \\
\hline
\vdots & \vdots \\
\hline
p-1 & p-1, 2p-1, 3p-1, \cdots \\
\hline
\end{array}
$$

이와 같은 분류를 수학에서 쉽게 나타내는 방법이 있는데 바로 **합동**(congruent modulo p)이라는 개념입니다.
$$
f \equiv g \pmod{p}
$$

쉽게 말해 두 수가 $p$로 나누었을 때 같은 나머지를 가지면 $p$에 대해 합동입니다.

$$
1 \equiv 8 \pmod7
$$

다른 말로 그들의 차이가 $p$로 나누어 떨어진다고 생각할 수 있죠.

$$
(8-1) \div 7 =1
$$

이는 적당한 정수 $c$가 존재하여 다음 식을 만족한다는 것을 의미합니다.

$$

f - g = cp \quad \text{so} \quad f=cp+g

$$

고등학생이라면 갑자기 처음보는 수학개념을 가져와서 당황스러우실 수도 있는데요. 이 개념을 이미 알고 있는(아마 수학과나 영재 수업을 들으신)분이라면 아까 나머지가 $p-1$개의 약수라는 말을 했을 때부터 페르마의 소정리가 떠오르셨을 것입니다.

  
>[!note] 페르마의 소정리
>어떤 소수 $p$와 $p$로 나누어지지 않는 정수 $a$에 대해, $a^{p-1} \equiv 1 \pmod p$ 이다.

페르마의 소정리란, 어떤 소수 $p$와 그 소수로 나누어지지 않는 정수 $a$가 있을 때, $a$를 $p-1$만큼 거듭제곱한 값은 $p$로 나누었을 때 나머지가 $1$이 된다는 것입니다.

예를 들어, $p = 7$이고 $a = 3$인 경우를 생각해 보겠습니다. $3^6 = 729$이며, 이를 $7$로 나눈 나머지는 $1$입니다. 따라서 합동표현으로 나타내면 다음과 같이 쓸 수 있습니다.

$$
3^6 \equiv 1 \pmod 7
$$
뒷 내용을 보일때 굳이 페르마 소정리의 증명이 필요한 것은 아니기에 저는 군을 이용한 증명만 제시하고 넘어가겠습니다.

  

> **페르마의 소정리 증명**
>
> 모듈로 $p$의 정수들의 곱셈에 대한 군 $G=\{1, 2, \ldots, p-1\}$에 대하여, $a \in G$는 $p$와 서로소이므로, $a$는 $G$에 대한 역원을 가지며, $a \times a^{-1} \equiv 1 \pmod{p}$이다. $a$가 $p$와 서로소이므로, $aG = \{a \times 1, a \times 2, \ldots, a \times (p-1)\}=G$이다. 따라서 $aG$의 원소들을 모두 곱하면 $G$의 원소들을 모두 곱한 것과 같다. $(a \times 1) \times (a \times 2) \times \ldots \times (a \times (p-1)) \equiv 1 \times 2 \times \ldots \times (p-1) \pmod{p}$ 즉, $a^{p-1} \times (p-1)! \equiv (p-1)! \pmod{p}$이다. $p$는 소수이므로, $1$부터 $p-1$까지 모든 정수는 모듈로 $p$에서 역원을 가진다. $(p-1)!$은 $p$로 나누어지지 않으므로, $(p-1)!$의 역원으로 양변을 곱해주면, $a^{p-1} \equiv 1 \pmod{p}$이다.


페르마의 소정리를 이용해 식의 성질을 보도록하겠습니다. $a=10$이라 하면 앞서 $p$가 $2$나 $5$가 아닌 소수라 했으므로, 페르마의 소정리에 의해 적당한 정수 $c$가 존재하여 다음 식을 만족합니다.

$$
10^{p-1} - 1 = cp
$$

양변의 역수를 취한 다음 $c$를 곱하면 소수 역수를 얻을 수 있고,

$$
\frac{1}{p} = \frac{c}{10^{p-1} - 1}
$$

양변에 $r$을 곱하면 앞서 본 분수표현을 얻을 수 있습니다.

$$
\frac{r}{p} = \frac{rc}{10^{p-1} - 1}
$$

이 식으로 부터 $r < p$이므로 $rc < 10^{p-1}$입니다. 따라서 $rc$는 최대 $p - 1$자릿수를 가진다는 것을 알 수 있습니다. 또한 이 식의 우변은 앞서 본 등비수열의 합과 같습니다.
$$
\frac{r}{p} = \frac{rc}{10^{p-1}} + \frac{rc}{10^{2(p-1)}} + \cdots
$$
그러므로 $\frac{r}{p}$의 순환마디의 길이는 $p - 1$이거나 $p - 1$의 약수임을 알 수 있습니다. 그리고 순환마디 또한 $rc$와 연관이 있다는 것을 알수 있죠.

## 9가 반복되는 이유

앞선 증명들로부터 $r < p$가 $10^k - 1$을 나누는 어떤 양의 정수 $k$에 대해, 다음 식이 성립합니다. 여기서 $P$는 $\frac{r}{p}$의 순환마디이며, $10^k$보다 작은 양의 정수입니다.

$$

\frac{r}{p} = \frac{P}{10^k - 1}

$$

양변에 소수 $p$를 곱하면,
$$
pP = r(10^k - 1)
$$

소수 $p$는 $r$을 나누지 않으므로 $10^k - 1$을 나눕니다. 따라서 $\frac{r}{p}$의 순환마디의 길이는$10^k - 1$이 $p$로 나누어지게 되는 가장 작은 정수 $k$와 같다는 것을 알 수 있습니다. 다른말로 주기 길이는 $r$이 아니라 오로지 $p$에만 달려있죠. 그러므로 우리는 $\frac{r}{p}$의 소수표현이 $k$자리마다 반복된다는 결론을 내릴 수 있습니다.

$2$ 또는 $5$가 아닌 소수 $p$에 대해 순환마디 $P$의 길이가 짝수의 길이 즉, $k=2t$이라고 가정해보겠습니다. 그렇다면 $P$는 $t$자리보다 작거나 같은 두 수 $M$과 $N$으로 나누어 두 부분으로 표현할 수 있습니다.

$$
\begin{align*}
P = M \cdot 10^t + N\\
(\text{단}, \,\, M, N < 10^t)
\end{align*}
$$

이제 준비가 끝났으므로 $M$과 $N$의 합이 항상 $9$로만 이루져 있음을 보이겠습니다.

$$claim. M + N = 99\cdots9 = 10^t - 1$$

앞선 식에서 $k$가 짝수라 했으므로 합차공식을 다음과 같이 인수분해 할 수 있습니다.

$$
pP = r(10^{2t} - 1) = r(10^t - 1)(10^t + 1)
$$

$\frac{r}{p}$은 기약분수이므로, $p$는 $r$을 나눌 수 없습니다. 게다가 $p$는 $10^t - 1$도 나눌 수 없습니다. 왜냐하면 그랬다면 $r/p$의 주기 길이가 $2t$가 아니라 $t$가 될 것이기 때문입니다.

$$
\begin{gather*}
p \nmid r\\
p \nmid 10^t-1
\end{gather*}
$$

그러므로 소수 $p$는 $10^t + 1$을 나눕니다.

$$
p \mid 10^t+1
$$

앞선 식을 $P$를 이용해 나타내면 다음과 같고,

$$
\frac{r}{p} = \frac{P}{10^{2t} - 1} = \frac{M \cdot 10^t + N}{(10^t - 1)(10^t + 1)}
$$

이로부터 분모와 분자를 약분하면 식을 깔끔하게 정리할 수 있습니다.

$$
\begin{align*}
\frac{r(10^t + 1)}{p} &= \frac{M \cdot 10^t + N}{10^t - 1} = \frac{M \cdot 10^t {\color{red}{- M+ M}} + N}{10^t - 1} \\
&= \frac{M(10^t - 1) + M + N}{10^t - 1} = M+\frac{M + N}{10^t - 1}
\end{align*}
$$

앞서 소수 $p$는 $10^t + 1$을 나눈다고 했으므로, 이 결과는 항상 정수여야합니다. 따라서 $\frac{M + N}{10^t - 1}$은 정수이며, $M$과 $N$은 각각 $t$자리 정수이므로,

$$
0 < M + N \leq 10^t - 1 + 10^t - 1
$$

$\frac{M + N}{10^t - 1}$은 기껏해야 $0$보다 크고 $2$보다 작거나 같은 정수입니다.

$$
0 < \frac{M + N}{10^t - 1} \leq 2
$$

그런데 이 식이 $2$와 같다는 등식은 $M = N = 10^t - 1$일 때만 성립할 수 있으며, 이 경우 $P$의 각 자리 수는 $9$가 됩니다. 그러나 이 경우에는 가장 짧은 주기의 길이가 한 자리가 되므로 순환마디의 길이가 짝수라는 가정에 어긋납니다.

결국

$$
\frac{M + N}{10^t - 1} = 1
$$

이므로,

$$
M + N = 10^t - 1 \quad \square
$$

이 됩니다.[^1]

  
## 순환마디를 더 잘게 쪼갠다면?

우리는 앞서 소수 $p$를 분모로 갖는 분수의 소수표현에서 소수점 아래 수들을 두 부분으로 분할하여 더하는 합이 $9$가 되는 현상을 관찰했습니다. 그런데 이러한 성질은 반드시 두 부분으로만 나눌 때 가능한 것은 아닙니다.

예를 들어, $\frac{1}{7}$의 순환주기는 [[142857]]입니다.

$$
\frac{1}{7}=0.\overline{142857}
$$

이 숫자들을 두개의 동일한 길이의 수로 나눈 후 더하면 앞서 보았듯이 그 합은 $999$입니다. 이제 이 성질을 두 부분으로 나누는 성질이라는 의미에서 2-블록 특성(2-block property)이라 하겠습니다.

$$
142 + 857 = 999
$$

그렇다면 $142857$은 3-블록 특성도 가집니다.

$$
14+28+57 = 99
$$

만약 우리가 $\frac{3}{7}$을 살펴본다면 2-블록 특성에 의해

$$
\frac{3}{7} = 0.\overline{428571}
$$

다시 $428 + 571 = 999$가 되며

$$
42 + 85 + 71 = 198
$$

이 됩니다. 이것은 $99$만큼 좋지는 않지만, $198$은 $99$의 두 배이므로 배수라는 점에서 $\frac{3}{7}$이 3-블록 특성을 가지고 있다고 할 수 있습니다. 그리고 이러한 수들은 다양한 소수에서 확인할 수 있으며, 소수의 거듭제곱의 분수에서도 관찰할 수 있습니다. 자세한 내용은 앞선 내용에 비해 너무나 길고 어려워지므로 논문[^2]을 참조하시길 바라며 증명은 여기서 마무리 짓도록 하겠습니다.

$$
\begin{array}{|c|c|c|c|}
\hline
\text{denominator} & \ell & \text{fraction} & \text{m-block property holds for} \\
\hline
7 & 6 & 1/7 = 0.\overline{142857} & 2,3,6 \\ \hline
7 & 6 & 3/7 = 0.\overline{428571} & 2,3,6 \\ \hline
13 & 6 & 1/13 = 0.\overline{076923} & 2,3,6 \\ \hline
13 & 6 & 11/13 = 0.\overline{846153} & 2,3,6 \\ \hline
17 & 16 & 1/17 = 0.\overline{0588235294117647} & 2,4,8,16 \\ \hline
19 & 18 & 1/19 = 0.\overline{052631578947368421} & 2,3,6,9,18 \\ \hline
31 & 15 & 1/31 = 0.\overline{032258064516129} & 3,5,15 \\ \hline
31 & 15 & 11/31 = 0.\overline{354838709677419} & 3,5,15 \\ \hline
73 & 8 & 1/73 = 0.\overline{23287671} & 2,4,8 \\ \hline
487 & 486 & 1/487 = 0.\overline{00020533\cdots} & 2,3,6,9,18,27,54,81,162,243,486 \\
\hline
\end{array}
$$

  

$$
\begin{array}{|c|c|c|c|}
\hline
\text{denominator} & \ell & \text{fraction} & \text{m-block property holds for} \\
\hline
49 = 7^2 & 42 & 1/49 = 0.020408163265306\ldots & 2,3,6,14,21,42 \\ \hline
121 = 11^2 & 22 & 1/121 = 0.0082644628\ldots & 2,22 \\ \hline
169 = 13^2 & 78 & 1/169 = 0.0059171597\ldots & 2,3,6,26,39,78 \\ \hline
343 = 7^3 & 294 & 1/343 = 0.002915\ldots & 2,3,6,14,21,42,98,147,294 \\ \hline
237,169 = 487^2 & 486 & 1/237169 = 0.000004216\ldots & 2,3,6,9,18,27,54,81,162,243,486 \\
\hline
\end{array}
$$

## One more Thing

이 성질에서 자주 소개되었던 $\frac{1}{7}$에 $1, 2, \cdots, 6$을 곱하면 순환마디가 순서만 바뀔 뿐 같은 숫자들만 나오는 성질이 있다는 것을 알고 계실 것입니다. 그렇다면 이러한 성질은 과연 우연일까요?

$$
\begin{align*}
\frac{1}{7}=0.\overline{142857}\\
\frac{2}{7}=0.\overline{285714}\\
\frac{3}{7}=0.\overline{428571}\\
\frac{4}{7}=0.\overline{571428}\\
\frac{5}{7}=0.\overline{714285}\\
\frac{6}{7}=0.\overline{857142}\\
\end{align*}
$$

다음 영상은 오늘 다뤘던 성질을 바탕으로 순환수의 성질에 대해 알아보도록 하겠습니다.

[^1]: [A Property of Some Repeating Decimals](https://doi.org/10.5948/UPO9780883859384.020)
[^2]: [Repeating Decimals: A Period Piece](https://doi.org/10.4169/002557010x479974)